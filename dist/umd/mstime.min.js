!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.mstime=t()}(this,function(){"use strict";var e=require("./present"),t=require("./utils"),n=t.config,i=t.plugins,r=t.format,s=require("./default-plugins/mstimePluginTrimMean"),a={},l={};return{config:n,plugins:i,timers:a,start:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=e();(l=n()).consoleTime&&console.time(t),a[t]=a[t]||{entries:[]};var o={timestamp:+new Date,start:r(s)};return i.data&&(o.data=i.data),a[t].entries.push(o),a[t]},end:function(t){var n=e();l.consoleTime&&console.timeEnd(t);var s=a[t];if(!s)return null;s.plugins={};var o=s.entries,u=o[o.length-1];u.end=r(n),u.diff=r(u.end-u.start),s.last=u.diff,s.sum=r((s.sum||0)+u.diff),s.avg=r(s.sum/o.length);for(var m=i(),g=0;g<m.length;g+=1){var f=m[g].plugin;f&&f.run&&(s.plugins[f.name]=f.run(a,s))}return s},clear:function(e){delete a[e]},mstimePluginUseLocalStorage:function(){var e=JSON.parse(global.localStorage.getItem("mstime.timers"));return e&&(a=e),{name:"mstime-plugin-use-local-storage",run:function(e,t){global.localStorage.setItem("mstime.timers",JSON.stringify(a));var n=global.localStorage.getItem("mstime.timers");return{createdAt:(new Date).getTime(),totalEntries:t.entries.length,size:n.length}}}},mstimePluginTrimMean:s}});
