!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.mstime=t()}(this,function(){"use strict";var e=require("./present"),t=require("./utils"),n=t.config,r=t.plugins,i=t.format,a=t.sumArray,o={};return{config:n,plugins:r,timers:o,start:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n().consoleTime&&console.time(t);var a=e();o[t]=o[t]||{entries:[]};var s={start:i(a)};return r.data&&(s.data=r.data),o[t].entries.push(s),o[t]},end:function(t){n().consoleTime&&console.timeEnd(t);var s=e(),u=o[t];u.output={};var l=u.entries,m=l[l.length-1];m.end=i(s),m.diff=i(m.end-m.start),u.last=m.diff;var f=l.map(function(e){return e.diff});u.sum=i(a(f)),u.avg=i(u.sum/l.length);for(var g=r(),c=0;c<g.length;c+=1){var d=g[c].plugin;d&&d.run&&(u.output[d.name]=d.run(u))}return u},mstimePluginUseLocalStorage:function(){var e=JSON.parse(global.localStorage.getItem("mstime.timers"));return e&&(o=e),{name:"mstime-plugin-use-local-storage",run:function(e){global.localStorage.setItem("mstime.timers",JSON.stringify(o));var t=global.localStorage.getItem("mstime.timers");return{createdAt:(new Date).getTime(),totalEntries:e.entries.length,size:t.length}}}}}});
