!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.mstime=t()}(this,function(){"use strict";var e=require("./present"),t=require("./utils"),i=t.config,n=t.plugins,r=t.format,a=require("./default-plugins/mstimePluginTrimMean"),s=require("./default-plugins/mstimePluginChartist"),l={},m={};return{config:i,plugins:n,timers:l,start:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e();(m=i()).consoleTime&&console.time(t),l[t]=l[t]||{entries:[]};var a={timestamp:+new Date,start:r};return n.data&&(a.data=n.data),l[t].entries.push(a),l[t]},end:function(t){var i=e();m.consoleTime&&console.timeEnd(t);var a=l[t];if(!a)return null;a.plugins={};var s=a.entries,u=s[s.length-1];u.diff=i-u.start,a.last=u.diff,a.sum=(a.sum||0)+u.diff,a.avg=a.sum/s.length,u.avg=a.avg,a.last=r(a.last),u.start=r(u.start),u.end=r(i),u.diff=r(u.diff),a.sum=r(a.sum),a.avg=r(a.avg);for(var o=n(),g=0;g<o.length;g+=1){var f=o[g].plugin;f&&f.run&&(a.plugins[f.name]=f.run(l,a))}return a},clear:function(e){delete l[e];for(var t=n(),i=0;i<t.length;i+=1){var r=t[i].plugin;r&&r.clear&&r.clear()}},mstimePluginUseLocalStorage:function(){var e=JSON.parse(global.localStorage.getItem("mstime.timers"));return e&&(l=e),{name:"mstime-plugin-use-local-storage",run:function(e,t){global.localStorage.setItem("mstime.timers",JSON.stringify(l));var i=global.localStorage.getItem("mstime.timers");return{createdAt:(new Date).getTime(),totalEntries:t.entries.length,size:i.length}},clear:function(){global.localStorage.setItem("mstime.timers",JSON.stringify(l))}}},mstimePluginTrimMean:a,mstimePluginChartist:s}});
